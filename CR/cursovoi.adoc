:imagesdir: images
:toc:
:toc-title: Оглавление

[.text-center]
МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РОССИЙСКОЙ ФЕДЕРАЦИИ +
Федеральное государственное автономное образовательное учреждение высшего образования +
«Южно-Уральский государственный университет» +
(национальный исследовательский университет) +
Высшая школа электроники и компьютерных наук +
Кафедра «Информационно-измерительная техника»

[.text-center]

Отчет по курсовуому проекту +
Варианта 11

[.text-right]
Выполнил: +
студент группы КЭ-415 +
Леонов В.А. +
Платонов Д.В.

:toc:
:toc-title: ОГЛАВЛЕНИЕ:

== Крусовая работа
=== Задание
--
Разработка устройства индикации напряжения
--
=== 1. Требования к разработке

image::1.jpg[]
image::2.jpg[]

=== 2. Отладочная плата XNUCLLEO-F411RE

Отладочная плата на базе микроконтроллера STM32F411RE, представляет собой гибкую платформу, позволяющую расширять свои функциональные возможности с помощью плат расширения для Arduino и ST Morpho. Плата XNUCLLEO-F411RE изображена на рисунке 1.

image::3.jpg[]
Рисунок 1 - Плата XNUCLLEO-F411RE

=== 3. Плата Accessory Shield

Accessory Shield - это плата расширения совместимая с популярными платформами для разработки электронных приложений, такими как Arduino UNO, Arduino Leonardo, NUCLEO, XNUCLEO и совместимыми. На плате установлены самые популярные дочерние модули, подходящие для реализации большинства задач.

Особенности: +
- Разъем расширения для подключения плат Arduino; +
- Разъем XBee для подключения беспроводных модулей; +
- OLED дисплей 0.96-дюймов с разрешением 128x64 пикселей; +
- RGB светодиод; +
- Зуммер; +
- Потенциометр 10кОм; + 
- 3-осевой цифровой акселерометр ADXL345; +
-Температурный датчик LM75BDP; +
- Джойстик 5-ти позиционный; +
- Индикатор состояния XBee; +
- Индикатор питания; +
- Кнопка сброса модулей XBee и Arduino; +
- Часы реального времени (RTC); +
- Держатель батареи CR1220 для RTC; +
- Драйвер RGB светодиода; +
- Джампер выбора режима Отладка/Связь.

image::4.jpg[]
Рисунок 2 - Плата Accessory Shield

=== 4. Переменный резистор

Переменные резисторы — это разновидность резисторов, электрическое сопротивление которых регулируется с помощью механического воздействия на регулировочный орган. +
Переменный резистор находится на плате расширения  Accessory Shield с номиналом 10 кОм и подключается к каналу А0 (рисунок 5), дальше подключается к плате XNUCLEO-F411RE через канал PA0 (рисунок 6).

image::5.jpg[]
Рисунок 3 - Переменный резистор с платы  Accessory Shield

image::6.jpg[]
Рисунок 4 - Канал для подключения переменного резистора с платы  Accessory Shield

Резистор - это линейный элмент, поэтому будем использовать линейную функцию следующего вида.

image::7.jpg[]

=== 5. Аналогово-Цифровой преобразовтель

АЦП - устройство, преобразующее входной аналоговый сигнал в дискретный код. Как правило, АЦП — электронное устройство, преобразующее напряжение в двоичный цифровой код. Понятие аналого-цифрового преобразования тесно связано с понятием измерения. Под измерением понимается процесс сравнения измеряемой величины с некоторым эталоном, при аналого-цифровом преобразовании происходит сравнение входной величины с некоторой опорной величиной (как правило, с опорным напряжением). Таким образом, аналого-цифровое преобразование может рассматриваться как измерение значения входного сигнала, и к нему применимы все понятия метрологии, такие, как погрешности измерения. +
АЦП бывают линейными и нелинейными, поскольку резистор является линейным элементом, то мы будем работать линейным АЦП. + 
Разрядность АЦП можно изменять 6, 8, 10, или 12 разрядов. +
Для одного канала можно задать разные режимы: +
- однократно измерить аналоговую величину; + 
- запустить канал в режиме непрерывного измерения. +
АЦП (12 разрядов) микроконтроллера STM32F411 работает по принципу *последовательного приближения*. +
 Основные элементы АЦП: +
Наличие регулярных и инжектированных каналов – отличие только в том, что инжектированные каналы могут писать данные в 4 регистра с 4 каналов сразу, а регулярный только в один регистр
19  аналоговых каналов,  16 из которых которые могут сконфигурированы на работу от внешних источников или 3 внутренних.
Внешние каналы поступают на мультиплексор, где выбирается только один из них. Т.е. в один момент времени может быть измерено напряжение только с одного канала.
Результат преобразования сохраняется в регистрах данных. Для регулярных каналов это только один 16 битный регистр. Для инжектированных – 4. +
Запуск преобразования может быть как программным, так и внешним. Внешний запуск может происходить от таймеров или с двух внешних входов.

=== 6. Механизм DMA

Прямой доступ к памяти (англ. direct memory access, DMA) — режим обмена данными между устройствами компьютера или же между устройством и основной памятью, в котором центральный процессор (ЦП) не участвует. Так как данные не пересылаются в ЦП и обратно, скорость передачи увеличивается. +
Прямой доступ к памяти (DMA) используется для обеспечения высокоскоростной передачи данных между периферийными устройствами и памятью, а также между памятью и памятью. Данные могут быть быстро перемещены с помощью DMA без каких-либо действий процессора. Это позволяет освободить ресурсы процессора для других операций. +
Контроллер DMA сочетает в себе мощную архитектуру двойной главной шины AHB с независимым FIFO для оптимизации пропускной способности системы на основе сложной архитектуры матрицы шин. +
Основными функциями DMA являются: +
• Двойная архитектура главной шины AHB, одна из которых предназначена для доступа к памяти, а другая - для доступа к периферийным устройствам. +
• Интерфейс программирования AHB slave, поддерживающий только 32-разрядный доступ. +
• 8 потоков для каждого контроллера DMA, до 8 каналов (запросов) на поток. +
• Глубина из четырех слов 32 буфера памяти первого входа и первого выхода (FIFO) на поток, которые можно
использовать в режиме FIFO или в прямом режиме. +

